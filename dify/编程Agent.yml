app:
  description: æ”¯æŒå·¥å…·è°ƒç”¨çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œæ”¯æŒé¡¹ç›®åˆ†æã€ä»£ç ç”Ÿæˆã€Bugä¿®å¤ã€ä»£ç å®¡æŸ¥ã€ä»£ç é‡æ„ã€æ–‡ä»¶ç¼–è¾‘
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: ç¼–ç¨‹Agent
  use_icon_as_answer_icon: true
dependencies: []
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: agent
      id: start-agent
      source: start
      sourceHandle: source
      target: agent
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: agent
        targetType: answer
      id: agent-answer
      source: agent
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: ç”¨æˆ·é—®é¢˜
          max_length: 5000
          options: []
          required: true
          type: text-input
          variable: query
        - label: æ–‡ä»¶å†…å®¹
          max_length: 100000
          options: []
          required: false
          type: paragraph
          variable: file_content
        - label: æ–‡ä»¶è·¯å¾„
          max_length: 500
          options: []
          required: false
          type: text-input
          variable: file_path
        - label: é€‰ä¸­ä»£ç 
          max_length: 50000
          options: []
          required: false
          type: paragraph
          variable: selection
        - label: ç¼–ç¨‹è¯­è¨€
          max_length: null
          options:
          - python
          - javascript
          - typescript
          - java
          - go
          - rust
          - cpp
          - csharp
          - php
          - ruby
          - swift
          - kotlin
          required: false
          type: select
          variable: language
        - label: é¡¹ç›®æ–‡ä»¶åˆ—è¡¨
          max_length: 50000
          options: []
          required: false
          type: paragraph
          variable: project_files
        - label: é”™è¯¯ä¿¡æ¯
          max_length: 10000
          options: []
          required: false
          type: paragraph
          variable: error_message
      height: 265
      id: start
      position:
        x: 30
        y: 150
      positionAbsolute:
        x: 30
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        agent_parameters:
          instruction:
            type: constant
            value: |
              ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œå…·æœ‰ä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚

              ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼š

              1. é¡¹ç›®åˆ†æï¼šåˆ†æé¡¹ç›®ç»“æ„ã€æ¶æ„è®¾è®¡ã€ä»£ç ç»„ç»‡

              2. ä»£ç ç”Ÿæˆï¼šç¼–å†™é«˜è´¨é‡ã€å¯ç»´æŠ¤ã€ç¬¦åˆæœ€ä½³å®è·µçš„ä»£ç 

              3. Bugä¿®å¤ï¼šè¯†åˆ«é—®é¢˜æ ¹æºã€æä¾›å®Œæ•´çš„ä¿®å¤æ–¹æ¡ˆ

              4. ä»£ç å®¡æŸ¥ï¼šæ£€æŸ¥ä»£ç è´¨é‡ã€æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§

              5. ä»£ç é‡æ„ï¼šä¼˜åŒ–ä»£ç ç»“æ„ã€æå‡æ€§èƒ½ã€æ”¹å–„å¯è¯»æ€§

              6. æŠ€æœ¯è§£é‡Šï¼šæ¸…æ™°è§£é‡Šå¤æ‚çš„æŠ€æœ¯æ¦‚å¿µ

              7. æ–‡ä»¶æ“ä½œï¼šå¯ä»¥è¯»å–ã€ç¼–è¾‘ã€åˆ›å»ºæ–‡ä»¶ï¼ˆé€šè¿‡å·¥å…·è°ƒç”¨ï¼‰

              æ‰§è¡ŒåŸåˆ™ï¼š

              - **ä¼˜å…ˆä½¿ç”¨å·¥å…·è°ƒç”¨**ï¼šå½“ç”¨æˆ·è¦æ±‚ä¿®æ”¹æ–‡ä»¶ã€è¿è¡Œä»£ç æˆ–è·å–ä¿¡æ¯æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å·¥å…·è°ƒç”¨ï¼Œè€Œä¸æ˜¯åªæä¾›å»ºè®®

              - **åˆ†æ­¥æ‰§è¡Œ**ï¼šå¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå°†å…¶åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œé€æ­¥å®Œæˆ

              - **éªŒè¯ç»“æœ**ï¼šæ‰§è¡Œå·¥å…·åï¼Œæ£€æŸ¥ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå¿…è¦æ—¶è¿›è¡Œä¿®æ­£

              - **æä¾›æ¸…æ™°åé¦ˆ**ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç”¨æˆ·è¯´æ˜æ­£åœ¨æ‰§è¡Œçš„æ“ä½œå’Œç»“æœ

              å›ç­”åŸåˆ™ï¼š

              - æä¾›æ¸…æ™°ã€å‡†ç¡®ã€å®ç”¨çš„å›ç­”

              - è€ƒè™‘ä»£ç çš„æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§

              - éµå¾ªç¼–ç¨‹æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼

              - ç»™å‡ºå…·ä½“ã€å¯æ“ä½œçš„å»ºè®®

              - å¿…è¦æ—¶æä¾›ç¤ºä¾‹ä»£ç 

              - **é‡è¦**ï¼šå½“éœ€è¦ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å·¥å…·è°ƒç”¨ç›´æ¥ç¼–è¾‘æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åªæä¾›ä»£ç å»ºè®®
          model:
            type: constant
            value:
              completion_params:
                enable_search: true
                enable_thinking: true
                temperature: 0.3
                top_p: 0.8
              mode: chat
              model: qwen-plus-latest
              model_type: llm
              provider: langgenius/tongyi/tongyi
              type: model-selector
          query:
            type: constant
            value: '{{#start.query#}}'
          tools:
            type: constant
            value:
            - enabled: true
              extra:
                description: è¿è¡Œä¸€æ®µä»£ç å¹¶è¿”å›ç»“æœã€‚å½“æ‚¨ä½¿ç”¨è¾ƒä½è´¨é‡çš„æ¨¡å‹æ—¶ï¼Œè¯·ç¡®ä¿æœ‰ä¸€äº›æç¤ºå¸®åŠ© LLM ç†è§£å¦‚ä½•ç¼–å†™ä»£ç ã€‚
              parameters:
                code:
                  auto: 1
                  value: null
                language:
                  auto: 1
                  value: null
              provider_name: code
              provider_show_name: code
              schemas:
              - form: llm
                human_description:
                  en_US: The programming language of the code
                  ja_JP: The programming language of the code
                  pt_BR: A linguagem de programaÃ§Ã£o do cÃ³digo
                  zh_Hans: ä»£ç çš„ç¼–ç¨‹è¯­è¨€
                label:
                  en_US: Language
                  ja_JP: Language
                  pt_BR: Idioma
                  zh_Hans: è¯­è¨€
                llm_description: language of the code, only "python3" and "javascript" are supported
                name: language
                options:
                - label:
                    en_US: Python3
                    ja_JP: Python3
                    pt_BR: Python3
                    zh_Hans: Python3
                  value: python3
                - label:
                    en_US: JavaScript
                    ja_JP: JavaScript
                    pt_BR: JavaScript
                    zh_Hans: JavaScript
                  value: javascript
                required: true
                type: string
              - form: llm
                human_description:
                  en_US: The code to be executed
                  ja_JP: The code to be executed
                  pt_BR: O cÃ³digo a ser executado
                  zh_Hans: è¦æ‰§è¡Œçš„ä»£ç 
                label:
                  en_US: Code
                  ja_JP: Code
                  pt_BR: CÃ³digo
                  zh_Hans: ä»£ç 
                llm_description: code to be executed, only native packages are allowed, network/IO operations are disabled.
                name: code
                required: true
                type: string
              settings: {}
              tool_description: è¿è¡Œä¸€æ®µä»£ç å¹¶è¿”å›ç»“æœã€‚å½“æ‚¨ä½¿ç”¨è¾ƒä½è´¨é‡çš„æ¨¡å‹æ—¶ï¼Œè¯·ç¡®ä¿æœ‰ä¸€äº›æç¤ºå¸®åŠ© LLM ç†è§£å¦‚ä½•ç¼–å†™ä»£ç ã€‚
              tool_label: ä»£ç è§£é‡Šå™¨
              tool_name: simple_code
              type: builtin
            - enabled: true
              extra:
                description: ä¸€ä¸ªç”¨äºçˆ¬å–ç½‘é¡µçš„å·¥å…·ã€‚
              parameters:
                url:
                  auto: 1
                  value: null
              provider_name: webscraper
              provider_show_name: webscraper
              schemas:
              - form: llm
                human_description:
                  en_US: used for linking to webpages
                  ja_JP: used for linking to webpages
                  pt_BR: used for linking to webpages
                  zh_Hans: ç”¨äºé“¾æ¥åˆ°ç½‘é¡µ
                label:
                  en_US: URL
                  ja_JP: URL
                  pt_BR: URL
                  zh_Hans: ç½‘é¡µé“¾æ¥
                llm_description: url for scraping
                name: url
                required: true
                type: string
              - default: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.1000.0 Safari/537.36
                form: form
                human_description:
                  en_US: used for identifying the browser.
                  ja_JP: used for identifying the browser.
                  pt_BR: used for identifying the browser.
                  zh_Hans: ç”¨äºè¯†åˆ«æµè§ˆå™¨ã€‚
                label:
                  en_US: User Agent
                  ja_JP: User Agent
                  pt_BR: User Agent
                  zh_Hans: User Agent
                name: user_agent
                required: false
                type: string
              - default: 'false'
                form: form
                human_description:
                  en_US: If true, the crawler will only return the page summary content.
                  ja_JP: If true, the crawler will only return the page summary content.
                  pt_BR: If true, the crawler will only return the page summary content.
                  zh_Hans: å¦‚æœå¯ç”¨ï¼Œçˆ¬è™«å°†ä»…è¿”å›é¡µé¢æ‘˜è¦å†…å®¹ã€‚
                label:
                  en_US: Whether to generate summary
                  ja_JP: Whether to generate summary
                  pt_BR: Whether to generate summary
                  zh_Hans: æ˜¯å¦ç”Ÿæˆæ‘˜è¦
                name: generate_summary
                options:
                - label:
                    en_US: 'Yes'
                    ja_JP: 'Yes'
                    pt_BR: 'Yes'
                    zh_Hans: æ˜¯
                  value: 'true'
                - label:
                    en_US: 'No'
                    ja_JP: 'No'
                    pt_BR: 'No'
                    zh_Hans: å¦
                  value: 'false'
                required: false
                type: boolean
              settings:
                generate_summary:
                  value:
                    type: constant
                    value: 'false'
                user_agent:
                  value:
                    type: mixed
                    value: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
                      (KHTML, like Gecko) Chrome/100.0.1000.0 Safari/537.36
              tool_description: ä¸€ä¸ªç”¨äºçˆ¬å–ç½‘é¡µçš„å·¥å…·ã€‚
              tool_label: ç½‘é¡µçˆ¬è™«
              tool_name: webscraper
              type: builtin
        agent_strategy_label: FunctionCalling
        agent_strategy_name: function_calling
        agent_strategy_provider_name: langgenius/agent/agent
        desc: ''
        instructions: |
          ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œå…·æœ‰ä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚

          ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼š

          1. é¡¹ç›®åˆ†æï¼šåˆ†æé¡¹ç›®ç»“æ„ã€æ¶æ„è®¾è®¡ã€ä»£ç ç»„ç»‡

          2. ä»£ç ç”Ÿæˆï¼šç¼–å†™é«˜è´¨é‡ã€å¯ç»´æŠ¤ã€ç¬¦åˆæœ€ä½³å®è·µçš„ä»£ç 

          3. Bugä¿®å¤ï¼šè¯†åˆ«é—®é¢˜æ ¹æºã€æä¾›å®Œæ•´çš„ä¿®å¤æ–¹æ¡ˆ

          4. ä»£ç å®¡æŸ¥ï¼šæ£€æŸ¥ä»£ç è´¨é‡ã€æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§

          5. ä»£ç é‡æ„ï¼šä¼˜åŒ–ä»£ç ç»“æ„ã€æå‡æ€§èƒ½ã€æ”¹å–„å¯è¯»æ€§

          6. æŠ€æœ¯è§£é‡Šï¼šæ¸…æ™°è§£é‡Šå¤æ‚çš„æŠ€æœ¯æ¦‚å¿µ

          7. æ–‡ä»¶æ“ä½œï¼šå¯ä»¥è¯»å–ã€ç¼–è¾‘ã€åˆ›å»ºæ–‡ä»¶ï¼ˆé€šè¿‡å·¥å…·è°ƒç”¨ï¼‰

          æ‰§è¡ŒåŸåˆ™ï¼š

          - **ä¼˜å…ˆä½¿ç”¨å·¥å…·è°ƒç”¨**ï¼šå½“ç”¨æˆ·è¦æ±‚ä¿®æ”¹æ–‡ä»¶ã€è¿è¡Œä»£ç æˆ–è·å–ä¿¡æ¯æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å·¥å…·è°ƒç”¨ï¼Œè€Œä¸æ˜¯åªæä¾›å»ºè®®

          - **åˆ†æ­¥æ‰§è¡Œ**ï¼šå¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå°†å…¶åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œé€æ­¥å®Œæˆ

          - **éªŒè¯ç»“æœ**ï¼šæ‰§è¡Œå·¥å…·åï¼Œæ£€æŸ¥ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå¿…è¦æ—¶è¿›è¡Œä¿®æ­£

          - **æä¾›æ¸…æ™°åé¦ˆ**ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç”¨æˆ·è¯´æ˜æ­£åœ¨æ‰§è¡Œçš„æ“ä½œå’Œç»“æœ

          å›ç­”åŸåˆ™ï¼š

          - æä¾›æ¸…æ™°ã€å‡†ç¡®ã€å®ç”¨çš„å›ç­”

          - è€ƒè™‘ä»£ç çš„æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§

          - éµå¾ªç¼–ç¨‹æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼

          - ç»™å‡ºå…·ä½“ã€å¯æ“ä½œçš„å»ºè®®

          - å¿…è¦æ—¶æä¾›ç¤ºä¾‹ä»£ç 

          - **é‡è¦**ï¼šå½“éœ€è¦ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å·¥å…·è°ƒç”¨ç›´æ¥ç¼–è¾‘æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åªæä¾›ä»£ç å»ºè®®
        max_iteration: 15
        memory:
          window:
            enabled: true
            size: 20
        meta:
          minimum_dify_version: 1.7.0
          version: 0.0.2
        model:
          completion_params:
            enable_search: true
            enable_thinking: true
            temperature: 0.3
            top_p: 0.8
          mode: chat
          name: qwen-plus-latest
          provider: langgenius/tongyi/tongyi
        output_schema: {}
        plugin_unique_identifier: langgenius/agent:0.0.30@8e6a5ed91535194ff84d1e6917f7fc81c3e063237245fc959fd6047991ce8e71
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œå…·æœ‰ä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚


            ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼š

            1. é¡¹ç›®åˆ†æï¼šåˆ†æé¡¹ç›®ç»“æ„ã€æ¶æ„è®¾è®¡ã€ä»£ç ç»„ç»‡

            2. ä»£ç ç”Ÿæˆï¼šç¼–å†™é«˜è´¨é‡ã€å¯ç»´æŠ¤ã€ç¬¦åˆæœ€ä½³å®è·µçš„ä»£ç 

            3. Bugä¿®å¤ï¼šè¯†åˆ«é—®é¢˜æ ¹æºã€æä¾›å®Œæ•´çš„ä¿®å¤æ–¹æ¡ˆ

            4. ä»£ç å®¡æŸ¥ï¼šæ£€æŸ¥ä»£ç è´¨é‡ã€æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§

            5. ä»£ç é‡æ„ï¼šä¼˜åŒ–ä»£ç ç»“æ„ã€æå‡æ€§èƒ½ã€æ”¹å–„å¯è¯»æ€§

            6. æŠ€æœ¯è§£é‡Šï¼šæ¸…æ™°è§£é‡Šå¤æ‚çš„æŠ€æœ¯æ¦‚å¿µ

            7. æ–‡ä»¶æ“ä½œï¼šå¯ä»¥è¯»å–ã€ç¼–è¾‘ã€åˆ›å»ºæ–‡ä»¶ï¼ˆé€šè¿‡å·¥å…·è°ƒç”¨ï¼‰


            å›ç­”åŸåˆ™ï¼š

            - æä¾›æ¸…æ™°ã€å‡†ç¡®ã€å®ç”¨çš„å›ç­”

            - è€ƒè™‘ä»£ç çš„æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§

            - éµå¾ªç¼–ç¨‹æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼

            - ç»™å‡ºå…·ä½“ã€å¯æ“ä½œçš„å»ºè®®

            - å¿…è¦æ—¶æä¾›ç¤ºä¾‹ä»£ç 

            - å½“éœ€è¦ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨å·¥å…·è°ƒç”¨è€Œä¸æ˜¯åªæä¾›ä»£ç å»ºè®®

            '
        - id: user-prompt
          role: user
          text: '# ç”¨æˆ·é—®é¢˜

            {{#start.query#}}


            {% if start.file_path %}

            # å½“å‰æ–‡ä»¶

            æ–‡ä»¶è·¯å¾„ï¼š{{#start.file_path#}}

            {% if start.language %}

            ç¼–ç¨‹è¯­è¨€ï¼š{{#start.language#}}

            {% endif %}

            {% endif %}


            {% if start.selection %}

            # é€‰ä¸­çš„ä»£ç 

            ```{% if start.language %}{{#start.language#}}{% endif %}

            {{#start.selection#}}

            ```

            {% endif %}


            {% if start.file_content %}

            # å®Œæ•´æ–‡ä»¶å†…å®¹

            ```{% if start.language %}{{#start.language#}}{% endif %}

            {{#start.file_content#}}

            ```

            {% endif %}


            {% if start.error_message %}

            # é”™è¯¯ä¿¡æ¯

            ```

            {{#start.error_message#}}

            ```

            {% endif %}


            {% if start.project_files %}

            # é¡¹ç›®æ–‡ä»¶ç»“æ„

            ```

            {{#start.project_files#}}

            ```

            {% endif %}


            è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯æä¾›ä¸“ä¸šçš„å›ç­”ã€‚å¦‚æœéœ€è¦ç¼–å†™ä»£ç ï¼Œè¯·ï¼š

            1. æ·»åŠ å¿…è¦çš„æ³¨é‡Š

            2. è€ƒè™‘è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†

            3. éµå¾ªè¯¥è¯­è¨€çš„æœ€ä½³å®è·µ

            4. æä¾›æ¸…æ™°çš„ä½¿ç”¨è¯´æ˜

            å¦‚æœéœ€è¦ä¿®æ”¹æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨å·¥å…·è°ƒç”¨ç›´æ¥ç¼–è¾‘æ–‡ä»¶ã€‚

            '
        query: '{{#start.query#}}'
        selected: true
        strategy: function_calling
        title: ç¼–ç¨‹Agent
        tool_node_version: '2'
        tools: []
        type: agent
        variables: []
        vision:
          enabled: false
      height: 188
      id: agent
      position:
        x: 334
        y: 245
      positionAbsolute:
        x: 334
        y: 245
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#agent.text#}}'
        desc: ''
        selected: false
        title: ç›´æ¥å›å¤
        type: answer
      height: 103
      id: answer
      position:
        x: 638
        y: 245
      positionAbsolute:
        x: 638
        y: 245
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 90.24158521484446
      y: 97.86046559586919
      zoom: 1.2187707886145738
  rag_pipeline_variables: []
